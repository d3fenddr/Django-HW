{% extends 'base.html' %}
{% block title %}–°—Ç–∞—Ç—å–∏ ‚Äî Habr Lite{% endblock %}
{% block content %}

<div class="mb-3">
  <a class="btn btn-sm {% if not active_category %}btn-primary{% else %}btn-outline-primary{% endif %}"
     href="{% url 'articles:list' %}">–í—Å–µ</a>
  {% for c in categories %}
    <a class="btn btn-sm {% if active_category == c.slug %}btn-primary{% else %}btn-outline-primary{% endif %}"
       href="?category={{ c.slug }}">{{ c.name }}</a>
  {% endfor %}
</div>

<div class="row g-4">
  {% for a in articles %}
  <div class="col-md-6 col-lg-4">
    <div class="card article-card h-100">
      {% if a.image %}
        <img src="{{ a.image.url }}" class="card-img-top" alt="{{ a.title }}">
      {% endif %}
      <div class="card-body d-flex flex-column">
        <div class="small text-muted mb-1">
          {{ a.author.username }} ‚Ä¢ {{ a.category }} ‚Ä¢ {{ a.created_at|date:'d.m.Y' }}
        </div>
        <h5 class="card-title">{{ a.title }}</h5>
        <p class="card-text">{{ a.excerpt }}</p>
        <div class="mt-auto">
          <a href="{{ a.get_absolute_url }}" class="btn btn-primary btn-sm">–ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ</a>
          <span class="ms-3">üëç {{ a.likes_count }} | üëé {{ a.dislikes_count }}</span>
        </div>
      </div>
    </div>
  </div>
  {% empty %}
    <p>–ü–æ–∫–∞ –Ω–µ—Ç —Å—Ç–∞—Ç–µ–π.</p>
  {% endfor %}
</div>

<nav class="mt-4">
  <ul class="pagination">
    {% if articles.has_previous %}
      <li class="page-item"><a class="page-link" href="?page={{ articles.previous_page_number }}{% if active_category %}&category={{active_category}}{% endif %}">–ù–∞–∑–∞–¥</a></li>
    {% else %}
      <li class="page-item disabled"><span class="page-link">–ù–∞–∑–∞–¥</span></li>
    {% endif %}
    <li class="page-item disabled"><span class="page-link">–°—Ç—Ä. {{ articles.number }} –∏–∑ {{ articles.paginator.num_pages }}</span></li>
    {% if articles.has_next %}
      <li class="page-item"><a class="page-link" href="?page={{ articles.next_page_number }}{% if active_category %}&category={{active_category}}{% endif %}">–í–ø–µ—Ä—ë–¥</a></li>
    {% else %}
      <li class="page-item disabled"><span class="page-link">–í–ø–µ—Ä—ë–¥</span></li>
    {% endif %}
  </ul>
</nav>
{% endblock %}
